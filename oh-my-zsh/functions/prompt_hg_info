if [ -n "$__CURRENT_HG_BRANCH" ]; then
	local s="%{$fg[blue]%}("
	s+="$__CURRENT_HG_BRANCH"
	case "$__CURRENT_HG_BRANCH_STATUS" in
		ahead)
		s+="↑"
		;;
		diverged)
		s+="↕"
		;;
		behind)
		s+="↓"
		;;
	esac
	if [ -n "$__CURRENT_HG_BRANCH_IS_DIRTY" ]; then
		s+="%{$fg[blue]%})%{$fg[red]%}⚡%{$reset_color%} "
	fi

	printf "%s" $s
fi
